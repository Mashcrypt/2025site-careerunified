<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CV Generator – Career Unified</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/cv-generator.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>

<header>
  <h1>CV Generator</h1>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="jobs.html">Jobs</a>
  <a href="bursaries.html">Bursaries</a>
  <a href="varsity.html">Varsity</a>
  <a href="cv-generator.html" class="active">Generate CV</a>
</nav>

<main>
  <div class="form-card">
    <input id="fullName" placeholder="Full Name">
    <input id="email" placeholder="Email">
    <input id="phone" placeholder="Phone">
    <textarea id="summary" placeholder="Profile"></textarea>
    <textarea id="education" placeholder="Education"></textarea>
    <textarea id="experience" placeholder="Experience"></textarea>
    <textarea id="skills" placeholder="Skills"></textarea>
    <button onclick="generateCV()">Preview</button>
    <button onclick="downloadPDF()">Download PDF</button>
  </div>

  <div class="preview-card">
    <div id="cvPreview"></div>
  </div>

  <section style="max-width:1000px;margin:40px auto;">
    <h2>CV Tips</h2>
    <div id="cvTipsContainer"></div>
  </section>
</main>

<footer>
  <p>© 2026 Career Unified</p>
</footer>

<script src="js/sanityClient.js"></script>
<script>
const preview = document.getElementById('cvPreview');

function generateCV() {
  preview.innerHTML = `
    <h1>${document.getElementById('fullName').value}</h1>
    <p>${document.getElementById('email').value} | ${document.getElementById('phone').value}</p>
    <h3>Profile</h3>
    <p style="white-space:pre-line;">${document.getElementById('summary').value}</p>
    <h3>Education</h3>
    <p style="white-space:pre-line;">${document.getElementById('education').value}</p>
    <h3>Experience</h3>
    <p style="white-space:pre-line;">${document.getElementById('experience').value}</p>
    <h3>Skills</h3>
    <p style="white-space:pre-line;">${document.getElementById('skills').value}</p>
  `;
}

function downloadPDF() {
  html2pdf().from(preview).save("My_CV.pdf");
}

// Load CV Tips from Sanity
const tipsContainer = document.getElementById('cvTipsContainer');
async function fetchCvTips() {
  const tips = await window.sanityClient.fetch(`*[_type=="cvTip"] | order(_createdAt desc){
    title,
    content
  }`);
  
  if (!tips.length) {
    tipsContainer.innerHTML = "<p>No CV tips available yet.</p>";
    return;
  }

  tips.forEach(tip => {
    const div = document.createElement('div');
    div.style.background="#fff";
    div.style.padding="15px";
    div.style.marginBottom="10px";
    div.style.borderRadius="8px";
    div.innerHTML = `<strong>${tip.title}</strong><p style="white-space:pre-line;">${tip.content}</p>`;
    tipsContainer.appendChild(div);
  });
}

fetchCvTips();
</script>
</body>
</html>








